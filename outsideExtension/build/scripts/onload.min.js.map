{"version":3,"sources":["onload.js"],"names":["load","_load","tag","url","Promise","resolve","reject","element","document","createElement","parent","attr","onload","onerror","async","type","rel","appendChild","css","js","img","filesToLoad","window","location","href","indexOf","sfdcPage","dialogs","SimpleDialog","title","isMovable","displayX","extraClass","width","isModal","createDialog","message","setContentInnerHTML","show","then","jQuery","remove","html","all","map","item","length","catch","err","console","error"],"mappings":"AAEA,IAAIA,KAAO,WAEP,SAASC,EAAMC,GACX,OAAO,SAASC,GAEZ,OAAO,IAAIC,QAAQ,SAASC,EAASC,GACjC,IAAIC,EAAUC,SAASC,cAAcP,GACjCQ,EAAS,OACTC,EAAO,MAWX,OARAJ,EAAQK,OAAS,WACbP,EAAQF,IAEZI,EAAQM,QAAU,WACdP,EAAOH,IAIJD,GACH,IAAK,SACDK,EAAQO,OAAQ,EAChB,MACJ,IAAK,OACDP,EAAQQ,KAAO,WACfR,EAAQS,IAAM,aACdL,EAAO,OACPD,EAAS,OAIjBH,EAAQI,GAAQR,EAChBK,SAASE,GAAQO,YAAYV,MAKzC,OACIW,IAAKjB,EAAM,QACXkB,GAAIlB,EAAM,UACVmB,IAAKnB,EAAM,QAxCR,GA4CPoB,cAEIlB,IAAK,wEACLY,KAAM,QAENZ,IAAI,2EACJY,KAAK,QAELZ,IAAI,sEACJY,KAAK,OAELZ,IAAI,sEACJY,KAAK,OAELZ,IAAI,0DACJY,KAAK,OAELZ,IAAI,wEACJY,KAAK,OAELZ,IAAI,gGACJY,KAAK,OAGb,GAAGO,OAAOC,SAASC,KAAKC,QAAQ,uBAAyB,EAAG,CAElB,MAAlCC,SAASC,QAAoB,aAE7BD,SAASC,QAAoB,WAAI,IAAIC,aAAa,cAAc,GAEhEF,SAASC,QAAoB,WAAEE,MAAQ,0CAEvCH,SAASC,QAAoB,WAAEG,WAAY,EAE3CJ,SAASC,QAAoB,WAAEI,UAAW,EAE1CL,SAASC,QAAoB,WAAEK,WAAa,GAE5CN,SAASC,QAAoB,WAAEM,MAAQ,IAEvCP,SAASC,QAAoB,WAAEO,SAAU,EAEzCR,SAASC,QAAoB,WAAEQ,gBAGnC,IAAIC,QAAU,oVACdV,SAASC,QAAoB,WAAEU,oBAAoB,QAAUD,QAAU,UACvEV,SAASC,QAAoB,WAAEW,YAE/BtC,KAAKmB,GAAG,oEACHoB,KAAK,WAGF,OAFAC,OAAO,0BAA0BC,SACjCD,OAAO,QAAQE,KAAK,IACb,IAAItC,QAAQ,SAAUC,EAASC,GAClCkC,OAAO,QAAQxC,KAAK,wFAAyF,WACzGK,UAIXkC,KAAK,WACF,OAAOnC,QAAQuC,IAAItB,YAAYuB,IAAI,SAAUC,GACzC,OAAQA,EAAK9B,MACT,IAAK,KACD,OAAOf,KAAKmB,GAAG0B,EAAK1C,KACxB,IAAK,MACD,OAAOH,KAAKkB,IAAI2B,EAAK1C,WAIpCoC,KAAK,WACF,OAAOvC,KAAKmB,GAAG,gGAElBoB,KAAK,WACEC,OAAO,yBAAyBM,OAAS,GACzCN,OAAO,yBAAyBF,SAGvCS,MAAM,SAAUC,GACbC,QAAQC,MAAM,QAASF","file":"onload.min.js","sourcesContent":["//create namespace and shared variables\n\nvar load = (function() {\n    // Function which returns a function: https://davidwalsh.name/javascript-functions\n    function _load(tag) {\n        return function(url) {\n            // This promise will be used by Promise.all to determine success or failure\n            return new Promise(function(resolve, reject) {\n                var element = document.createElement(tag);\n                var parent = 'body';\n                var attr = 'src';\n\n                // Important success and error for the promise\n                element.onload = function() {\n                    resolve(url);\n                };\n                element.onerror = function() {\n                    reject(url);\n                };\n\n                // Need to set different attributes depending on tag type\n                switch(tag) {\n                    case 'script':\n                        element.async = true;\n                        break;\n                    case 'link':\n                        element.type = 'text/css';\n                        element.rel = 'stylesheet';\n                        attr = 'href';\n                        parent = 'head';\n                }\n\n                // Inject into document to kick off loading\n                element[attr] = url;\n                document[parent].appendChild(element);\n            });\n        };\n    }\n\n    return {\n        css: _load('link'),\n        js: _load('script'),\n        img: _load('img')\n    };\n})();\n\nvar filesToLoad = [\n    {\n        url: 'https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css',\n        type: 'css',\n    },{\n        url:\"https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css\",\n        type:'css',\n    },{\n        url:\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\",\n        type:'js',\n    },{\n        url:\"https://cdnjs.cloudflare.com/ajax/libs/jsforce/1.7.0/jsforce.min.js\",\n        type:'js',\n    },{\n        url:\"https://cdn.jsdelivr.net/bluebird/3.5.0/bluebird.min.js\",\n        type:'js',\n    },{\n        url:\"https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js\",\n        type:'js',\n    },{\n        url:\"https://xenotime-india.github.io/vf-page-builder/outsideExtension/build/scripts/helper.min.js\",\n        type:'js',\n    }];\n\nif(window.location.href.indexOf('.visual.force.com/') >= 0) {\n\n    if (sfdcPage.dialogs['SFDCDialog'] == null) { // checking if SFDCDialog modal popup already created on page.\n\n        sfdcPage.dialogs['SFDCDialog'] = new SimpleDialog('SFDCDialog', false); // creating modal popup with name ‘SFDCDialog’\n\n        sfdcPage.dialogs['SFDCDialog'].title = \"Salesforce Deployment Helper - Xenotime\"; // setting title of popup\n\n        sfdcPage.dialogs['SFDCDialog'].isMovable = false; //set true if want movable\n\n        sfdcPage.dialogs['SFDCDialog'].displayX = true; // set true if want close button on header\n\n        sfdcPage.dialogs['SFDCDialog'].extraClass = \"\" // use to set any extra style class if wanted\n\n        sfdcPage.dialogs['SFDCDialog'].width = 346; // set size of popup default = 400\n\n        sfdcPage.dialogs['SFDCDialog'].isModal = true; // set true if want block background.\n\n        sfdcPage.dialogs['SFDCDialog'].createDialog(); // finally call this method to create modal pop up  and append to current page.\n\n    }\n    var message = '<table border=\"0\"><tbody><tr><td style=\"vertical-align: top\"><img src=\"/s.gif\" class=\"warningLarge\" alt=\"Warning\"></td><td style=\"padding-left: 8px; vertical-align: top; line-height: 16px\"><p>This extension can\\'t execute in this page.</p><p>Navigate to <a href=\"/home/home.jsp\">home page</a> and try again.</p></td></tr></tbody></table>'\n    sfdcPage.dialogs['SFDCDialog'].setContentInnerHTML('<div>' + message + '</div>'); // sent content on modal pop up (use any text or html code.)\n    sfdcPage.dialogs['SFDCDialog'].show();// show modal popup\n} else {\n    load.js('https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js')\n        .then(function () {\n            jQuery(\"link[rel='stylesheet']\").remove();\n            jQuery('body').html('');\n            return new Promise(function (resolve, reject) {\n                jQuery(\"body\").load(\"https://xenotime-india.github.io/vf-page-builder/outsideExtension/build/template.html\", function () {\n                    resolve();\n                });\n            });\n        })\n        .then(function () {\n            return Promise.all(filesToLoad.map(function (item) {\n                switch (item.type) {\n                    case 'js':\n                        return load.js(item.url);\n                    case 'css':\n                        return load.css(item.url);\n                }\n            }));\n        })\n        .then(function () {\n            return load.js('https://xenotime-india.github.io/vf-page-builder/outsideExtension/build/scripts/app.min.js');\n        })\n        .then(function () {\n            if (jQuery('#sfdcConsoleContainer').length > 0) {\n                jQuery('#sfdcConsoleContainer').show();\n            }\n        })\n        .catch(function (err) {\n            console.error('Error', err);\n        });\n}"]}